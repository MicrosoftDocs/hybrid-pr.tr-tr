---
title: Azure ve Azure Stack Edge kullanarak hisse senedi algılama dışı
description: Azure ve Azure Stack Edge hizmetlerini kullanarak stok algılamayı nasıl uygulayacağınızı öğrenin.
author: BryanLa
ms.topic: article
ms.date: 11/05/2019
ms.author: bryanla
ms.reviewer: anajod
ms.lastreviewed: 11/05/2019
ms.openlocfilehash: 865f63bc4234e50ed169aa29cefdb1886750594c
ms.sourcegitcommit: bb3e40b210f86173568a47ba18c3cc50d4a40607
ms.translationtype: MT
ms.contentlocale: tr-TR
ms.lasthandoff: 06/17/2020
ms.locfileid: "84911989"
---
# <a name="out-of-stock-detection-at-the-edge-pattern"></a><span data-ttu-id="13136-103">Kenar düzeninde hisse senedi algılama</span><span class="sxs-lookup"><span data-stu-id="13136-103">Out of stock detection at the edge pattern</span></span>

<span data-ttu-id="13136-104">Bu düzende, raflar 'in bir Azure Stack Edge veya Azure IoT Edge cihaz ve ağ kameralarını kullanarak hisse senedi öğeleri olup olmadığını nasıl belirleyebileceği gösterilmektedir.</span><span class="sxs-lookup"><span data-stu-id="13136-104">This pattern illustrates how to determine if shelves have out of stock items using an Azure Stack Edge or Azure IoT Edge device and network cameras.</span></span>

## <a name="context-and-problem"></a><span data-ttu-id="13136-105">Bağlam ve sorun</span><span class="sxs-lookup"><span data-stu-id="13136-105">Context and problem</span></span>

<span data-ttu-id="13136-106">Fiziksel perakende mağazalarında, müşteriler bir öğeyi arayacağı, rafında yer almıyor.</span><span class="sxs-lookup"><span data-stu-id="13136-106">Physical retail stores lose sales because when customers look for an item, it's not present on the shelf.</span></span> <span data-ttu-id="13136-107">Ancak öğe, deponun arkasında ve geri eklenmemiş olabilir.</span><span class="sxs-lookup"><span data-stu-id="13136-107">However, the item could have been in the back of the store and not been restocked.</span></span> <span data-ttu-id="13136-108">Mağazaların personelini daha verimli bir şekilde kullanmak ve öğelerin yeniden kullanıma ihtiyacı olduğunda otomatik olarak bilgilendirmek ister.</span><span class="sxs-lookup"><span data-stu-id="13136-108">Stores would like to use their staff more efficiently and get automatically notified when items need restocking.</span></span>

## <a name="solution"></a><span data-ttu-id="13136-109">Çözüm</span><span class="sxs-lookup"><span data-stu-id="13136-109">Solution</span></span>

<span data-ttu-id="13136-110">Çözüm örneği her depoda Azure Stack Edge gibi bir uç cihaz kullanır ve bu da depodaki kameralardan verileri verimli bir şekilde işler.</span><span class="sxs-lookup"><span data-stu-id="13136-110">The solution example uses an edge device, like an Azure Stack Edge in each store, which efficiently processes data from cameras in the store.</span></span> <span data-ttu-id="13136-111">Bu iyileştirilmiş tasarım, mağazaların buluta yalnızca ilgili olayları ve görüntüleri göndermesini sağlar.</span><span class="sxs-lookup"><span data-stu-id="13136-111">This optimized design lets stores send only relevant events and images to the cloud.</span></span> <span data-ttu-id="13136-112">Tasarım bant genişliğini, depolama alanını kaydeder ve müşterinin gizliliğini sağlar.</span><span class="sxs-lookup"><span data-stu-id="13136-112">The design saves bandwidth, storage space, and ensures customer privacy.</span></span> <span data-ttu-id="13136-113">Çerçeveler her bir kameradan okunmasıyla, bir ML modeli görüntüyü işler ve stok dışı alanlardan herhangi birini döndürür.</span><span class="sxs-lookup"><span data-stu-id="13136-113">As frames are read from each camera, an ML model processes the image and returns any out of stock areas.</span></span> <span data-ttu-id="13136-114">Görüntü ve stok alanlarının tümü yerel bir Web uygulamasında görüntülenir.</span><span class="sxs-lookup"><span data-stu-id="13136-114">The image and out of stock areas are displayed on a local web app.</span></span> <span data-ttu-id="13136-115">Bu veriler, Power BI Öngörüler göstermek için zaman serisi Insight ortamına gönderilebilir.</span><span class="sxs-lookup"><span data-stu-id="13136-115">This data can be sent to a Time Series Insight environment to show insights in Power BI.</span></span>

![Uçtan uca çözüm mimarisi](media/pattern-out-of-stock-at-edge/solution-architecture.png)

<span data-ttu-id="13136-117">Çözümün nasıl çalıştığı aşağıda verilmiştir:</span><span class="sxs-lookup"><span data-stu-id="13136-117">Here's how the solution works:</span></span>

1. <span data-ttu-id="13136-118">Görüntüler, HTTP veya RTSP üzerinden bir ağ kamerasından yakalanır.</span><span class="sxs-lookup"><span data-stu-id="13136-118">Images are captured from a network camera over HTTP or RTSP.</span></span>
2. <span data-ttu-id="13136-119">Görüntü yeniden boyutlandırılır ve çıkarım sürücüsüne gönderilir. Bu, herhangi bir hisse senedi görüntüsü olup olmadığını anlamak için ML modeliyle iletişim kurar.</span><span class="sxs-lookup"><span data-stu-id="13136-119">The image is resized and sent to the inference driver, which communicates with the ML model to determine if there are any out of stock images.</span></span>
3. <span data-ttu-id="13136-120">ML modeli, stok dışı alanlardan herhangi birini döndürür.</span><span class="sxs-lookup"><span data-stu-id="13136-120">The ML model returns any out of stock areas.</span></span>
4. <span data-ttu-id="13136-121">Inyavanı sürücü, Ham görüntüyü bir blob 'a yükler (belirtilmişse) ve sonuçları modelden Azure IoT Hub ve bir sınırlayıcı kutu işlemcisine gönderir.</span><span class="sxs-lookup"><span data-stu-id="13136-121">The inferencing driver uploads the raw image to a blob (if specified), and sends the results from the model to Azure IoT Hub and a bounding box processor on the device.</span></span>
5. <span data-ttu-id="13136-122">Sınırlama kutusu işlemcisi görüntüye sınırlayıcı kutular ekler ve görüntü yolunu bellek içi veritabanında önbelleğe alır.</span><span class="sxs-lookup"><span data-stu-id="13136-122">The bounding box processor adds bounding boxes to the image and caches the image path in an in-memory database.</span></span>
6. <span data-ttu-id="13136-123">Web uygulaması görüntüleri sorgular ve alındıkları sırada gösterir.</span><span class="sxs-lookup"><span data-stu-id="13136-123">The web app queries for images and shows them in the order received.</span></span>
7. <span data-ttu-id="13136-124">IoT Hub iletiler Time Series Insights toplanmaktadır.</span><span class="sxs-lookup"><span data-stu-id="13136-124">Messages from IoT Hub are aggregated in Time Series Insights.</span></span>
8. <span data-ttu-id="13136-125">Power BI, Time Series Insights verileri ile zaman içinde stok öğelerinden oluşan etkileşimli bir rapor görüntüler.</span><span class="sxs-lookup"><span data-stu-id="13136-125">Power BI displays an interactive report of out of stock items over time with the data from Time Series Insights.</span></span>


## <a name="components"></a><span data-ttu-id="13136-126">Bileşenler</span><span class="sxs-lookup"><span data-stu-id="13136-126">Components</span></span>

<span data-ttu-id="13136-127">Bu çözüm aşağıdaki bileşenleri kullanır:</span><span class="sxs-lookup"><span data-stu-id="13136-127">This solution uses the following components:</span></span>

| <span data-ttu-id="13136-128">Katman</span><span class="sxs-lookup"><span data-stu-id="13136-128">Layer</span></span> | <span data-ttu-id="13136-129">Bileşen</span><span class="sxs-lookup"><span data-stu-id="13136-129">Component</span></span> | <span data-ttu-id="13136-130">Description</span><span class="sxs-lookup"><span data-stu-id="13136-130">Description</span></span> |
|----------|-----------|-------------|
| <span data-ttu-id="13136-131">Şirket içi donanım</span><span class="sxs-lookup"><span data-stu-id="13136-131">On-premises hardware</span></span> | <span data-ttu-id="13136-132">Ağ kamerası</span><span class="sxs-lookup"><span data-stu-id="13136-132">Network camera</span></span> | <span data-ttu-id="13136-133">Bir ağ kamerası, görüntüleri çıkarımı için sağlamak üzere HTTP veya RTSP beslemeli bir akışa sahip olmalıdır.</span><span class="sxs-lookup"><span data-stu-id="13136-133">A network camera is required, with either an HTTP or RTSP feed to provide the images for inference.</span></span> |
| <span data-ttu-id="13136-134">Azure</span><span class="sxs-lookup"><span data-stu-id="13136-134">Azure</span></span> | <span data-ttu-id="13136-135">Azure IoT Hub</span><span class="sxs-lookup"><span data-stu-id="13136-135">Azure IoT Hub</span></span> | <span data-ttu-id="13136-136">[Azure IoT Hub](/azure/iot-hub/) , sınır cihazları için cihaz sağlamayı ve mesajlaşma işlemini gerçekleştirir.</span><span class="sxs-lookup"><span data-stu-id="13136-136">[Azure IoT Hub](/azure/iot-hub/) handles device provisioning and messaging for the edge devices.</span></span> |
|  | <span data-ttu-id="13136-137">Azure Zaman Serisi Görüşleri</span><span class="sxs-lookup"><span data-stu-id="13136-137">Azure Time Series Insights</span></span> | <span data-ttu-id="13136-138">[Azure Time Series Insights](/azure/time-series-insights/) , IoT Hub iletileri görselleştirme için depolar.</span><span class="sxs-lookup"><span data-stu-id="13136-138">[Azure Time Series Insights](/azure/time-series-insights/) stores the messages from IoT Hub for visualization.</span></span> |
|  | <span data-ttu-id="13136-139">Power BI</span><span class="sxs-lookup"><span data-stu-id="13136-139">Power BI</span></span> | <span data-ttu-id="13136-140">[Microsoft Power BI](https://powerbi.microsoft.com/) , stok dışı olaylara yönelik iş odaklı raporlar sağlar.</span><span class="sxs-lookup"><span data-stu-id="13136-140">[Microsoft Power BI](https://powerbi.microsoft.com/) provides business-focused reports of out of stock events.</span></span> <span data-ttu-id="13136-141">Power BI, çıktıyı Azure Stream Analytics görüntülemek için kullanımı kolay bir pano arabirimi sağlar.</span><span class="sxs-lookup"><span data-stu-id="13136-141">Power BI provides an easy-to-use dashboard interface for viewing the output from Azure Stream Analytics.</span></span> |
| <span data-ttu-id="13136-142">Azure Stack Edge veya</span><span class="sxs-lookup"><span data-stu-id="13136-142">Azure Stack Edge or</span></span><br><span data-ttu-id="13136-143">Azure IoT Edge cihaz</span><span class="sxs-lookup"><span data-stu-id="13136-143">Azure IoT Edge device</span></span> | <span data-ttu-id="13136-144">Azure IoT Edge</span><span class="sxs-lookup"><span data-stu-id="13136-144">Azure IoT Edge</span></span> | <span data-ttu-id="13136-145">[Azure IoT Edge](/azure/iot-edge/) , şirket içi kapsayıcılar için çalışma zamanını düzenler ve cihaz yönetimini ve güncelleştirmelerini işler.</span><span class="sxs-lookup"><span data-stu-id="13136-145">[Azure IoT Edge](/azure/iot-edge/) orchestrates the runtime for the on-premises containers and handles device management and updates.</span></span>|
| | <span data-ttu-id="13136-146">Azure proje Brainwave</span><span class="sxs-lookup"><span data-stu-id="13136-146">Azure project brainwave</span></span> | <span data-ttu-id="13136-147">Azure Stack Edge cihazında, [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) , ml ınklesi hızlandırmak için alan-programlanabilir kapı dizileri (FPGAs) kullanır.</span><span class="sxs-lookup"><span data-stu-id="13136-147">On an Azure Stack Edge device, [Project Brainwave](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) uses Field-Programmable Gate Arrays (FPGAs) to accelerate ML inferencing.</span></span>|

## <a name="issues-and-considerations"></a><span data-ttu-id="13136-148">Sorunlar ve dikkat edilmesi gerekenler</span><span class="sxs-lookup"><span data-stu-id="13136-148">Issues and considerations</span></span>

<span data-ttu-id="13136-149">Bu çözümü nasıl uygulayacağınıza karar verirken aşağıdaki noktaları göz önünde bulundurun:</span><span class="sxs-lookup"><span data-stu-id="13136-149">Consider the following points when deciding how to implement this solution:</span></span>

### <a name="scalability"></a><span data-ttu-id="13136-150">Ölçeklenebilirlik</span><span class="sxs-lookup"><span data-stu-id="13136-150">Scalability</span></span>

<span data-ttu-id="13136-151">Çoğu makine öğrenimi modeli, belirtilen donanıma bağlı olarak, saniye başına yalnızca belirli sayıda karede çalıştırılabilir.</span><span class="sxs-lookup"><span data-stu-id="13136-151">Most machine learning models can only run at a certain number of frames per second, depending on the provided hardware.</span></span> <span data-ttu-id="13136-152">ML ardışık düzeninin yedeklemediğinden emin olmak için kameranızdan en iyi örnek hızı öğrenin.</span><span class="sxs-lookup"><span data-stu-id="13136-152">Determine the optimal sample rate from your camera(s) to ensure that the ML pipeline doesn't back up.</span></span> <span data-ttu-id="13136-153">Farklı donanım türleri farklı sayıda kameraları ve kare hızını işleymeyecektir.</span><span class="sxs-lookup"><span data-stu-id="13136-153">Different types of hardware will handle different numbers of cameras and frame rates.</span></span>

### <a name="availability"></a><span data-ttu-id="13136-154">Kullanılabilirlik</span><span class="sxs-lookup"><span data-stu-id="13136-154">Availability</span></span>

<span data-ttu-id="13136-155">Sınır cihazının bağlantıyı kaybetmesi durumunda ne olabileceğini göz önünde bulundurmanız önemlidir.</span><span class="sxs-lookup"><span data-stu-id="13136-155">It's important to consider what might happen if the edge device loses connectivity.</span></span> <span data-ttu-id="13136-156">Time Series Insights ve Power BI panosundan hangi verilerin kaybolabileceğini göz önünde bulundurun.</span><span class="sxs-lookup"><span data-stu-id="13136-156">Consider what data might be lost from the Time Series Insights and Power BI dashboard.</span></span> <span data-ttu-id="13136-157">Sağlanan örnek çözüm, yüksek oranda kullanılabilir olacak şekilde tasarlanmamıştır.</span><span class="sxs-lookup"><span data-stu-id="13136-157">The example solution as provided isn't designed to be highly available.</span></span>

### <a name="manageability"></a><span data-ttu-id="13136-158">Yönetilebilirlik</span><span class="sxs-lookup"><span data-stu-id="13136-158">Manageability</span></span>

<span data-ttu-id="13136-159">Bu çözüm, çok sayıda cihaza ve konuma yayılabilir ve bu da bir süre sonra olabilir.</span><span class="sxs-lookup"><span data-stu-id="13136-159">This solution can span many devices and locations, which could get unwieldy.</span></span> <span data-ttu-id="13136-160">Azure 'un IoT Hizmetleri, yeni konumları ve cihazları otomatik olarak çevrimiçi duruma getirebilir ve güncel tutar.</span><span class="sxs-lookup"><span data-stu-id="13136-160">Azure's IoT services can automatically bring new locations and devices online and keep them up to date.</span></span> <span data-ttu-id="13136-161">Uygun veri idare yordamlarının de ardından gelmelidir.</span><span class="sxs-lookup"><span data-stu-id="13136-161">Proper data governance procedures must be followed as well.</span></span>

### <a name="security"></a><span data-ttu-id="13136-162">Güvenlik</span><span class="sxs-lookup"><span data-stu-id="13136-162">Security</span></span>

<span data-ttu-id="13136-163">Bu model potansiyel olarak hassas verileri işler.</span><span class="sxs-lookup"><span data-stu-id="13136-163">This pattern handles potentially sensitive data.</span></span> <span data-ttu-id="13136-164">Anahtarların düzenli olarak döndürüldüğü ve Azure depolama hesabı ve yerel paylaşımlarının izinlerinin doğru ayarlandığından emin olun.</span><span class="sxs-lookup"><span data-stu-id="13136-164">Make sure keys are regularly rotated and the permissions on the Azure Storage Account and local shares are correctly set.</span></span>

## <a name="next-steps"></a><span data-ttu-id="13136-165">Sonraki adımlar</span><span class="sxs-lookup"><span data-stu-id="13136-165">Next steps</span></span>

<span data-ttu-id="13136-166">Bu makalede tanıtılan konular hakkında daha fazla bilgi edinmek için:</span><span class="sxs-lookup"><span data-stu-id="13136-166">To learn more about topics introduced in this article:</span></span>
- <span data-ttu-id="13136-167">Bu düzende [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/)ve [Azure Time Series Insights](/azure/time-series-insights/)dahil birden çok IoT ile ilgili hizmet kullanılır.</span><span class="sxs-lookup"><span data-stu-id="13136-167">Multiple IoT related services are used in this pattern, including [Azure IoT Edge](/azure/iot-edge/), [Azure IoT Hub](/azure/iot-hub/), and [Azure Time Series Insights](/azure/time-series-insights/).</span></span>
- <span data-ttu-id="13136-168">Microsoft Project Brainwave hakkında daha fazla bilgi edinmek için bkz. [Blog duyurusu](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) ve [Project Brainwave videosu ile Azure hızlandırılmış Machine Learning](https://www.youtube.com/watch?v=DJfMobMjCX0)kullanıma alma.</span><span class="sxs-lookup"><span data-stu-id="13136-168">To learn more about Microsoft Project Brainwave, see [the blog announcement](https://blogs.microsoft.com/ai/build-2018-project-brainwave/) and checkout out the [Azure Accelerated Machine Learning with Project Brainwave video](https://www.youtube.com/watch?v=DJfMobMjCX0).</span></span>
- <span data-ttu-id="13136-169">En iyi uygulamalar hakkında daha fazla bilgi edinmek ve ek sorulara yanıt almak için bkz. [karma uygulama tasarımı konuları](overview-app-design-considerations.md) .</span><span class="sxs-lookup"><span data-stu-id="13136-169">See [Hybrid app design considerations](overview-app-design-considerations.md) to learn more about best practices and to get answers to any additional questions.</span></span>
- <span data-ttu-id="13136-170">Ürünlerin ve çözümlerin tamamı hakkında daha fazla bilgi edinmek için [ürün ve çözümlerin Azure Stack ailesine](/azure-stack) bakın.</span><span class="sxs-lookup"><span data-stu-id="13136-170">See the [Azure Stack family of products and solutions](/azure-stack) to learn more about the entire portfolio of products and solutions.</span></span>

<span data-ttu-id="13136-171">Çözüm örneğini test etmeye hazırsanız, [analiz çözümü Dağıtım Kılavuzu ' na yönelik katmanlı veriler](https://aka.ms/edgeinferencingdeploy)' e geçin.</span><span class="sxs-lookup"><span data-stu-id="13136-171">When you're ready to test the solution example, continue with the [Tiered data for analytics solution deployment guide](https://aka.ms/edgeinferencingdeploy).</span></span> <span data-ttu-id="13136-172">Dağıtım Kılavuzu, bileşenlerinin dağıtılması ve test edilmesi için adım adım yönergeler sağlar.</span><span class="sxs-lookup"><span data-stu-id="13136-172">The deployment guide provides step-by-step instructions for deploying and testing its components.</span></span>
